name: MinecraftJavaEditionImage
description: This document installs Minecraft Java Edition.
schemaVersion: 1.0
# https://linuxconfig.org/ubuntu-20-04-minecraft-server-setup

constants:
  - fail:
      type: string
      value: '1'

phases:
  - name: build
    steps:
      - name: InstallAndConfigurePrereqs
        action: ExecuteBash
        inputs:
          commands:
            - sudo useradd -m -r -d /opt/minecraft minecraft
            - sudo apt install wget default-jdk
            - sudo mkdir /opt/minecraft/survival
            - sudo wget -O /opt/minecraft/survival/minecraft_server.jar https://piston-data.mojang.com/v1/objects/84194a2f286ef7c14ed7ce0090dba59902951553/server.jar
            - sudo bash -c "echo eula=true > /opt/minecraft/survival/eula.txt" 
            - sudo chown -R minecraft /opt/minecraft/survival/
# java -Xmx1024M -Xms1024M -jar minecraft_server.1.20.1.jar nogui
